# define the cpu used by Adafruit Feather M0 boards
export CPU = samd21
export CPU_MODEL = samd21g18a

#export needed for flash rule
export PORT_LINUX ?= /dev/ttyUSB0
export PORT_DARWIN ?= $(firstword $(sort $(wildcard /dev/tty.usbmodem*)))

# setup serial terminal
include $(RIOTMAKE)/tools/serial.inc.mk

# setup the flash tool used
ifeq ($(PROGRAMMER),jlink)
    # in case J-Link is attached to SWD pins, use a plain CPU memory model
    export JLINK_DEVICE := atsamw25
    include $(RIOTMAKE)/tools/jlink.inc.mk
else
    # by default, we use BOSSA to flash this board to take into account the
    # pre-flashed bootloader
    export LINKER_SCRIPT ?= $(RIOTCPU)/sam0_common/ldscripts/$(CPU_MODEL)_bootloader.ld
    include $(RIOTMAKE)/tools/bossa.inc.mk
endif

# setup the boards dependencies
include $(RIOTBOARD)/$(BOARD)/Makefile.dep
